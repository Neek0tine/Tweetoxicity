{% extends 'base.html' %}

{% block script %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js" ></script>
<script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);
    
    function drawChart() {

        var data = google.visualization.arrayToDataTable([
        {% for key, value in dashboardPie.items() %}
        {% if value is string %}
            ['{{ key }}', '{{ value }}'],
        {% else %}
            ['{{ key }}', {{ value }}],
        {% endif %}
        {% endfor %}
        ]);

        var options = {
        backgroundColor: 'transparent',
        legend: {textStyle: {color: 'white'}}
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
    }
</script>
{% endblock %}

{% block content %}
    <header class="text-white masthead" style="background: url(static/img/twitter-logo-graphic.png) center / cover, #585858;">
        <div class="masthead-content">
        <div class="container">
            <div id="piechart" style="width: 900px; height: 500px" ></div>
            <p><a href="{{ url_for('download') }}" class="btn btn-primary" name="submit_button" role="button" style="background: var(--blue);border-style: none;font-size: 20px;font-family: Lato, sans-serif;margin-top: 12px;">Download CSV</a></p>
            <table class="table table-hover table-dark">
                <thead>
                    <tr>
                    <!-- Your Columns HERE -->
                    <th scope="col">Tweet</th>
                    <th scope="col">Sentiment</th>
                    <th scope="col">Confidence</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Your rows inside the table HERE: -->
                    {% for data in items %}
                    <tr>
                    <td>{{ data[0] }}</td>
                    <td>{{ data[1] }}</td>
                    <td>{{ data[2] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        </div>
    </header>
{% endblock %}

{% block footer %}
<footer style="background: #292F33;height: 43.2px;">
    <div class="container">
        <p class="text-center text-white m-0 small" style="padding-top: 12px;">Copyright&nbsp;Â© TweeTox 2021</p>
    </div>
</footer>

{% endblock %}